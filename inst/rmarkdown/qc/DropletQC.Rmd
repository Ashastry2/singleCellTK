---
title: "Comprehensive reporting of droplet QC metrics"
date: "`r format(Sys.time(), '%B %d, %Y')`"
params: 
  object: object
output:
  html_document:
    number_sections: yes
    toc: yes
    code_folding: hide
---

```{r "DropletQC-lib", include=FALSE, warning=FALSE}
require(umap)
require(SummarizedExperiment)
require(SingleCellExperiment)
require(singleCellTK)
```

```{r, "DropletQC-import", include=FALSE, include=FALSE, warning=FALSE}
sce<-params$object
```

```{r, "EmptyDrops", results="asis", fig.align="center", warning=FALSE, message=FALSE}
    plotsEmptyDrops<- suppressWarnings(plotEmptyDropsResults(sce))
    i="EmptyDrops"
    cat(paste0('# ', i, ' {.tabset .tabset-fade} \n\n'))
    cat(paste0('## EmptyDrops, Total UMI counts vs Log-Probability \n\n'))
    plotsEmptyDrops$scatterEmptyDrops
    cat(paste0('## Session info \n\n'))
    sce@metadata$runEmptyDrops
```

```{r, include=FALSE, warning=FALSE, message=FALSE}
description_runEmptyDrops <- descriptionEmptyDrops()
```
# {.unlisted .unnumbered .toc-ignore}
`r description_runEmptyDrops`

```{r, "BarcodeRanks", results="asis", fig.align="center", warning=FALSE, message=FALSE}
    plotsBarcodeRank<- suppressWarnings(plotBarcodeRankScatter(sce))
    i="BarcodeRanks"
    cat(paste0('# ', i, ' {.tabset .tabset-fade} \n\n'))
    cat(paste0('## BarcodeRanks, Total UMI counts vs Rank \n\n'))
    plotsBarcodeRank
    cat(paste0('## Session info \n\n'))
    sce@metadata$runBarcodeRankDrops
```

```{r, include=FALSE, warning=FALSE, message=FALSE}
description_runBarcodeRank <- descriptionBarcodeRank()
```
# {.unlisted .unnumbered .toc-ignore}
`r description_runBarcodeRank`

# SessionInfo
```{r "DropletQC-session-info", include=TRUE}
sessionInfo()
```